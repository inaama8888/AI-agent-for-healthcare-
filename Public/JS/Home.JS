const chatBox = document.getElementById("chat-box");
const input = document.getElementById("user-input");
const sendBtn = document.getElementById("send-btn");

let step = "greet";
let userName = "";

window.onload = () => {
  addBotMessage("砖 专  住 专转, 转 住!  砖 砖?");
};

sendBtn.addEventListener("click", sendMessage);
input.addEventListener("keypress", (e) => {
  if (e.key === "Enter") sendMessage();
});

function sendMessage() {
  const text = input.value.trim();
  if (!text) return;

  addUserMessage(text);
  input.value = "";

  if (step === "greet") {
    userName = text;
    addBotMessage(`注  ${userName}!`);
    setTimeout(() => showMainMenu(), 800);
    step = "menu";
  } else if (step === "menu") {
    handleMenuChoice(text);
  }
}

function addBotMessage(text) {
  const msg = document.createElement("div");
  msg.classList.add("bot-message");
  msg.textContent = text;
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function addUserMessage(text) {
  const msg = document.createElement("div");
  msg.classList.add("user-message");
  msg.textContent = text;
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function showMainMenu() {
  addBotMessage("专 驻注:");
  addBotMessage("1锔 专砖 砖注专");
  addBotMessage("2锔 砖转 转砖转 注 砖注专");
  addBotMessage("3锔 专 注 住 专砖");
}

function handleMenuChoice(choice) {
  switch (choice) {
    case "1":
      addBotMessage(`爪 ${userName},  专砖 转 砖注专 锔`);
      //  砖 转住祝 砖 砖 砖驻转 砖注专 -DB
      break;
    case "2":
      addBotMessage(`专 ${userName}, 转  砖 转  砖 注 注专 砖注专 `);
      break;
    case "3":
      addBotMessage(`转 ${userName}, 转 砖 注 住 专砖 `);
      break;
    default:
      addBotMessage("  住驻专  1 -3 ");
  }
}
